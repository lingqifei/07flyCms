<link rel="stylesheet" href="__STATIC__/addon/editor/kindeditor/themes/default/default.css" />
<script src="__STATIC__/addon/editor/kindeditor/kindeditor-all-min.js"></script>
<script src="__STATIC__/addon/editor/kindeditor/lang/zh-CN.js"></script>
<script type="text/javascript">
    $(function(){
        var editor_{$addons_data.name};
        editor_{$addons_data.name} = KindEditor.create('textarea[name="{$addons_data.name}"]', {
                themesPath: KindEditor.basePath+'/themes/',//主题路径
                width: '100%',
                height: '{$addons_config.editor_height}',
                resizeType: {eq name="addons_config.editor_resize_type" value="1"}1 {else /} 0 {/eq},
                pasteType : 2,
                urlType : 'absolute',
                fileManagerJson : '{:url('fileManagerJson')}',
                uploadJson : '{:addons_url("editor://Upload/pictureUpload")}',
                items : [
                'source', 'undo', 'redo', 'cut', 'copy','paste', 'plainpaste', 'wordpaste','selectall',
                'justifyleft','justifycenter','justifyright','justifyfull','insertorderedlist','insertunorderedlist','indent',
                'outdent','subscript','superscript','fontname','fontsize','forecolor','hilitecolor','bold',
                'italic','underline','strikethrough','removeformat','image','multiimage','table',
                'link','unlink','fullscreen'
                ],
                extraFileUploadParams: { session_id : '{:session_id()}'}
            });

        //ajax提交之前同步
        $('button[type="submit"],#submit,.ajax-post,#autoSave').click(function(){
                editor_{$addons_data.name}.sync();
        });
    });
</script>
